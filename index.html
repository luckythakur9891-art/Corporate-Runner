<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Corporate Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

<style>
body{margin:0;overflow:hidden;background:#0d1117;font-family:Segoe UI;}
#overlay{
 position:fixed;
 inset:0;
 background:radial-gradient(circle,#0d1117,#000);
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 color:#fff;
 z-index:10;
}
#overlay h1{
 font-size:28px;
 margin-bottom:20px;
 letter-spacing:1px;
}
#startBtn{
 padding:16px 40px;
 border:none;
 border-radius:40px;
 font-size:18px;
 font-weight:700;
 cursor:pointer;
 background:linear-gradient(135deg,#00eaff,#0066ff);
 box-shadow:0 0 35px rgba(0,234,255,1);
 animation:pulse 1.4s infinite;
}
@keyframes pulse{
 0%{transform:scale(1);}
 50%{transform:scale(1.08);}
 100%{transform:scale(1);}
}
#ui{
 position:fixed;
 top:10px;
 left:50%;
 transform:translateX(-50%);
 color:white;
 background:rgba(0,0,0,.6);
 padding:8px 16px;
 border-radius:12px;
 z-index:5;
}
</style>
</head>

<body>

<div id="overlay">
 <h1>Directed by Lucky Thakur</h1>
 <button id="startBtn">START GAME</button>
</div>

<div id="ui" style="display:none;">Score: <span id="score">0</span></div>

<script>
let scene,camera,renderer;
let player,vy=0,isSliding=false;
let obstacles=[];
let score=0,speed=0.25,started=false;

document.getElementById("startBtn").onclick=()=>{
 document.getElementById("overlay").style.display="none";
 document.getElementById("ui").style.display="block";
 init();
 animate();
 started=true;
};

function init(){
 scene=new THREE.Scene();
 scene.background=new THREE.Color(0x1b1f2a);

 camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,100);
 camera.position.set(0,4,6);

 renderer=new THREE.WebGLRenderer({antialias:true});
 renderer.setSize(innerWidth,innerHeight);
 document.body.appendChild(renderer.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,1.3));
 let d=new THREE.DirectionalLight(0xffffff,1);
 d.position.set(5,10,5);
 scene.add(d);

 // FLOOR
 let floor=new THREE.Mesh(
  new THREE.BoxGeometry(8,0.5,200),
  new THREE.MeshStandardMaterial({color:0x3a3f4b})
 );
 floor.position.z=-90;
 scene.add(floor);

 // PLAYER
 player=new THREE.Mesh(
  new THREE.BoxGeometry(1,2,1),
  new THREE.MeshStandardMaterial({color:0x00eaff})
 );
 player.position.y=1;
 scene.add(player);

 window.addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
 });

 document.addEventListener("keydown",keys);
 swipeControls();
}

function keys(e){
 if(!started) return;
 if(e.key==="ArrowLeft") move(-1);
 if(e.key==="ArrowRight") move(1);
 if(e.key==="ArrowUp") jump();
 if(e.key==="ArrowDown") slide();
}

function move(dir){
 player.position.x=Math.max(-2.5,Math.min(2.5,player.position.x+dir));
}
function jump(){
 if(player.position.y<=1) vy=0.24;
}
function slide(){
 if(isSliding) return;
 isSliding=true;
 player.scale.y=0.5;
 setTimeout(()=>{
  player.scale.y=1;
  isSliding=false;
 },600);
}

function swipeControls(){
 let sx=0,sy=0;
 document.addEventListener("touchstart",e=>{
  sx=e.touches[0].clientX;
  sy=e.touches[0].clientY;
 });
 document.addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].clientX-sx;
  let dy=e.changedTouches[0].clientY-sy;
  if(Math.abs(dx)>Math.abs(dy)){
    dx>40?move(1):dx<-40&&move(-1);
  }else{
    dy<-40?jump():dy>40&&slide();
  }
 });
}

function spawnObstacle(){
 let h=Math.random()>0.5?1.2:0.6; // jump / slide obstacle
 let o=new THREE.Mesh(
  new THREE.BoxGeometry(1,h,1),
  new THREE.MeshStandardMaterial({color:0xff4444})
 );
 o.position.set((Math.random()*5)-2.5,h/2,-60);
 scene.add(o);
 obstacles.push(o);
}

let timer=0;

function animate(){
 requestAnimationFrame(animate);
 if(!started) return;

 // gravity
 vy-=0.012;
 player.position.y+=vy;
 if(player.position.y<1){player.position.y=1;vy=0;}

 timer++;
 if(timer>80){spawnObstacle();timer=0;}

 obstacles.forEach((o,i)=>{
  o.position.z+=speed*10;
  if(o.position.z>5){
    scene.remove(o);
    obstacles.splice(i,1);
  }
  if(o.position.distanceTo(player.position)<0.9){
    alert("Game Over! Score: "+Math.floor(score));
    location.reload();
  }
 });

 speed+=0.00005; // speed increase
 score+=0.5;
 document.getElementById("score").innerText=Math.floor(score);

 camera.position.lerp(
  new THREE.Vector3(player.position.x,4,6),0.1
 );
 camera.lookAt(player.position.x,1,0);

 renderer.render(scene,camera);
}
</script>

</body>
</html>
