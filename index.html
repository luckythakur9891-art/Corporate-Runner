<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Corporate Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

<style>
body{margin:0;overflow:hidden;font-family:Segoe UI}
#overlay{
 position:fixed;inset:0;
 background:linear-gradient(#4facfe,#00f2fe);
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
 color:white;z-index:10;
}
#overlay h1{font-size:26px;margin-bottom:20px}
#startBtn{
 padding:16px 46px;
 border:none;border-radius:50px;
 font-size:18px;font-weight:700;
 background:linear-gradient(135deg,#ffcc00,#ff6600);
 box-shadow:0 0 30px rgba(255,140,0,.9);
 cursor:pointer;
 animation:pulse 1.2s infinite;
}
@keyframes pulse{
 0%{transform:scale(1)}
 50%{transform:scale(1.08)}
 100%{transform:scale(1)}
}
#ui{
 position:fixed;top:12px;left:50%;
 transform:translateX(-50%);
 background:rgba(0,0,0,.6);
 color:white;padding:8px 16px;
 border-radius:12px;
 display:none;z-index:5;
}
</style>
</head>

<body>

<div id="overlay">
 <h1>Directed by Lucky Thakur</h1>
 <button id="startBtn">START GAME</button>
</div>

<div id="ui">Score: <span id="score">0</span></div>

<script>
let scene,camera,renderer;
let player,vy=0,sliding=false,slideT=0;
let obstacles=[],buildings=[],cars=[];
let score=0,speed=0.18,started=false;
let timeCycle=0;

document.getElementById("startBtn").onclick=()=>{
 overlay.style.display="none";
 ui.style.display="block";
 init(); animate(); started=true;
};

function init(){
 scene=new THREE.Scene();
 scene.background=new THREE.Color(0x87ceeb);

 camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,0.1,300);
 camera.position.set(0,4.5,7);

 renderer=new THREE.WebGLRenderer({antialias:true});
 renderer.setSize(innerWidth,innerHeight);
 document.body.appendChild(renderer.domElement);

 scene.add(new THREE.AmbientLight(0xffffff,1.2));
 let sun=new THREE.DirectionalLight(0xffffff,1);
 sun.position.set(10,20,10);
 scene.add(sun);

 let road=new THREE.Mesh(
  new THREE.BoxGeometry(6,0.3,400),
  new THREE.MeshStandardMaterial({color:0x333333})
 );
 road.position.z=-200;
 scene.add(road);

 player=new THREE.Mesh(
  new THREE.BoxGeometry(1,2,1),
  new THREE.MeshStandardMaterial({color:0x00eaff})
 );
 player.position.y=1;
 scene.add(player);

 document.addEventListener("keydown",keys);
 swipe();
}

function keys(e){
 if(e.key==="ArrowLeft") move(-1);
 if(e.key==="ArrowRight") move(1);
 if(e.key==="ArrowUp") jump();
 if(e.key==="ArrowDown") slide();
}
function move(d){
 player.position.x=Math.max(-2,Math.min(2,player.position.x+d));
}
function jump(){ if(player.position.y<=1) vy=0.28 }
function slide(){
 if(sliding) return;
 sliding=true; slideT=0;
}

function swipe(){
 let sx=0,sy=0;
 addEventListener("touchstart",e=>{
  sx=e.touches[0].clientX;
  sy=e.touches[0].clientY;
 });
 addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].clientX-sx;
  let dy=e.changedTouches[0].clientY-sy;
  if(Math.abs(dx)>Math.abs(dy)){
   dx>40?move(1):dx<-40&&move(-1);
  }else{
   dy<-40?jump():dy>40&&slide();
  }
 });
}

function spawnObstacle(){
 let o=new THREE.Mesh(
  new THREE.BoxGeometry(1,Math.random()>0.5?1.4:0.8,1),
  new THREE.MeshStandardMaterial({color:0xff3333})
 );
 o.position.set((Math.random()*4)-2,o.geometry.parameters.height/2,-120);
 scene.add(o); obstacles.push(o);
}

function spawnBuilding(side){
 let h=Math.random()*6+5;
 let b=new THREE.Mesh(
  new THREE.BoxGeometry(2,h,2),
  new THREE.MeshStandardMaterial({
   color:0x9db4c0,
   metalness:0.6,
   roughness:0.2
  })
 );
 b.position.set(side*5,h/2,-200);
 scene.add(b); buildings.push(b);
}

function spawnCar(side){
 let c=new THREE.Mesh(
  new THREE.BoxGeometry(1.2,0.6,2),
  new THREE.MeshStandardMaterial({color:0xffcc00})
 );
 c.position.set(side*1.8,0.3,-120);
 scene.add(c); cars.push(c);
}

let t=0;
function animate(){
 requestAnimationFrame(animate);
 if(!started) return;

 // gravity
 vy-=0.015;
 player.position.y+=vy;
 if(player.position.y<1){player.position.y=1;vy=0;}

 // smooth slide
 if(sliding){
  slideT+=0.08;
  player.scale.y=1-0.5*Math.sin(Math.PI*slideT);
  if(slideT>=1){player.scale.y=1;sliding=false}
 }

 // day-night
 timeCycle+=0.002;
 let c=Math.abs(Math.sin(timeCycle));
 scene.background.setHSL(0.6,0.6,0.6*c+0.1);

 t++;
 if(t%70===0) spawnObstacle();
 if(t%60===0){spawnBuilding(-1);spawnBuilding(1)}
 if(t%120===0) spawnCar(Math.random()>0.5?1:-1);

 obstacles.forEach((o,i)=>{
  o.position.z+=speed*12;
  if(o.position.z>10){scene.remove(o);obstacles.splice(i,1)}
  if(o.position.distanceTo(player.position)<0.9){
   alert("Game Over! Score: "+Math.floor(score));
   location.reload();
  }
 });

 buildings.forEach((b,i)=>{
  b.position.z+=speed*12;
  if(b.position.z>20){scene.remove(b);buildings.splice(i,1)}
 });

 cars.forEach((c,i)=>{
  c.position.z+=speed*14;
  if(c.position.z>15){scene.remove(c);cars.splice(i,1)}
 });

 speed+=0.00025; // TEMPLE RUN SPEED CURVE
 score+=0.7;
 scoreEl.innerText=Math.floor(score);

 camera.position.lerp(
  new THREE.Vector3(player.position.x,4.5,7),0.1
 );
 camera.lookAt(player.position.x,1,0);

 renderer.render(scene,camera);
}
</script>
</body>
</html>
